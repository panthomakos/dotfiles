# vim: filetype=zsh:

# Bundler Development
alias dbundle="ruby -I /home/pan/Projects/bundler/lib /home/pan/Projects/bundler/bin/bundle"

# Screenshot Capture
alias capture="maim -s --nokeyboard"

# Encrypt a file for myself.
alias gpge="gpg -e -r 'Pan Thomakos'"
# Decrypt a file.
alias gpgd="gpg -d"
# Check a SIGFILE.
alias gpglp="gpg --list-packets <"
# Check an ENCFILE.
alias gpgss="gpg -o /dev/null --show-session-key <"

# Format a disk with LUKS.
alias luksf="sudo cryptsetup -c aes-xts-plain64 -s 512 -h sha512 luksFormat"
# Open a LUKS encrypted device.
alias lukso="sudo cryptsetup luksOpen"
# Close a LUKS encrypted device.
alias luksc="sudo cryptsetup luksClose"
# Dump cryptographic info for a LUKS encrypted device.
alias luksd="sudo cryptsetup luksDump"
# Change a LUKS key. (luksk /dev/sdX -S <slot>)
alias luksk="sudo cryptsetup luksChangeKey"

# Run the Ranger File Browser
alias ra="ranger"

# Parse and display with JQ
alias jqd="jq '.'"

# Fingerprint an SSH key.
alias fingerprint="ssh-keygen -lf"

# Lock the screen and suspend.
alias i3exit="i3lock && systemctl suspend"

# Convenience methods for vim.
alias vi='vim'
alias v='vim'

# Colorful ls.
alias ls="ls -G --color=auto"

# Colorful grep.
alias grep="grep --color=auto"

# Systemctl
alias s=systemctl
alias ss=sudo systemctl

# Convenience shell aliases.
alias psf="ps -ef | grep "
alias h="history"
alias b="bundle"
alias be="bundle exec"
alias ber='bundle exec rspec --color'
alias r="bundle exec ruby -Ilib"
alias k="be rake"
alias known="vim ~/.ssh/known_hosts"

# Alias to cleanup remote git branches.
alias git:clean="ruby ~/bin/git:clean"

# Alias to calculate running paces.
alias pace="ruby ~/bin/pace"

# Memcache server start and stop.
alias mem.start="sudo systemctl start memcached"
alias mem.stop="sudo systemctl stop memcached"

# Redis server start and stop.
alias redis.start="sudo systemctl start redis"
alias redis.stop="sudo systemctl stop redis"

# MySql server start and stop.
alias mysql.start="sudo systemctl start mysqld.service"
alias mysql.stop="sudo systemctl stop mysqld.service"

# ZooKeeper start and stop.
alias zk.start="zkServer start"
alias zk.stop="zkServer stop"

# Postgres start, stop and connect.
alias pg="pg_ctl -D /usr/local/var/postgres"
alias pg.start="pg -l /usr/local/var/postgres/server.log start"
alias pg.stop="pg stop -s -m fast"

alias print.start="sudo systemctl start org.cups.cupsd.service avahi-daemon"
alias print.stop="sudo systemctl stop org.cups.cupsd.service avahi-daemon"
alias print.manage="chromium localhost:631"

# Convenience aliases for running Ruby specs.
alias specs="find spec/**/*_spec.rb"
alias rspecnr="specs | xargs grep -sL 'spec_helper' | xargs bundle exec rspec -c"
alias rspecr="specs | xargs grep -sl 'spec_helper' | xargs bundle exec rspec -c"

# Screen convenience commands.
alias sr="screen -r"
alias sl="screen -ls"

# Connect/Disconnect from a named VPN.
function vpno {
  sudo systemctl start openvpn@${1}.service
}

function vpnc {
  sudo systemctl stop openvpn@${1}.service
}

function vpns {
  sudo systemctl status openvpn@${1}.service -l
}

alias vpnls="sudo systemctl | grep 'openvpn@' | awk '{print \$1}'"

# Update all submodules
alias gits-update="git submodule foreach git pull origin master"

# Easily open a github project in Chrome.
function gh { chromium "https://github.com/$1" }

# Docker Related Aliases and Functions
# ------------------------------------

alias dco="docker-compose"
alias drm='docker rm -f $(docker ps -aq)'
alias drmi='docker rmi $(docker images | grep "^<none>" | awk "{print \$3}")'

# Docker Compose Exec by docker-compose name instead of auto-generated name.
function dce {
  docker exec -it $(docker-compose ps | grep $1 | awk '{print $1}') ${@:2}
}

# Run a zeus command on the zeus docker-compose container.
function z {
  dce zeus zeus ${@}
}
