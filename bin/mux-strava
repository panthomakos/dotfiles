tmux has-session -t strava

if [ $? != 0 ]
then
  mysql.server status || mysql.server start
  ps -ef | grep redis | grep -v grep || redis-server /usr/local/etc/redis.conf
  kill `cat ~/memcached.pid` ; memcached -d -P ~/memcached.pid

  tmux new-session -s strava -n Work -d

  tmux send-keys -t strava:Work 'cd ~/Projects/strava/active' C-m
  tmux send-keys -t strava:Work C-l
  tmux send-keys -t strava:Work 'vim' C-m

  tmux new-window -t strava -n Zeus
  tmux split-window -t strava:Zeus -v
  tmux split-window -t strava:Zeus.1 -h

  tmux send-keys -t strava:Zeus.1 'cd ~/Projects/strava/active' C-m
  tmux send-keys -t strava:Zeus.1 C-l
  tmux send-keys -t strava:Zeus.1 'zeus start' C-m

  tmux send-keys -t strava:Zeus.2 'cd ~/Projects/strava/active' C-m
  tmux send-keys -t strava:Zeus.2 C-l

  tmux send-keys -t strava:Zeus.3 'cd ~/Projects/strava/active' C-m
  tmux send-keys -t strava:Zeus.3 C-l

  tmux new-window -t strava -n Hudson
  tmux split-window -t strava:Hudson -h

  tmux send-keys -t strava:Hudson.1 'cd ~/Projects/strava/active' C-m
  tmux send-keys -t strava:Hudson.1 C-l

  tmux send-keys -t strava:Hudson.2 'cd ~/Projects/strava/active' C-m
  tmux send-keys -t strava:Hudson.2 C-l
fi

tmux attach -t strava
