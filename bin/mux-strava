tmux has-session -t strava

if [ $? != 0 ]
then
  mysql.server status || mysql.server start
  ps -ef | grep redis | grep -v grep || redis-server /usr/local/etc/redis.conf
  kill `cat ~/memcached.pid` ; memcached -d -P ~/memcached.pid

  tmux new-session -s strava -n Work -d

  tmux send-keys -t strava:Work 'cd ~/Projects/strava/active' C-m
  tmux send-keys -t strava:Work 'clear' C-m
  tmux send-keys -t strava:Work 'vim' C-m

  tmux new-window -t strava -n Zeus
  tmux split-window -t strava:Zeus -h

  tmux send-keys -t strava:Zeus.1 'cd ~/Projects/strava/active' C-m
  tmux send-keys -t strava:Zeus.1 'clear' C-m
  tmux send-keys -t strava:Zeus.1 'zeus start' C-m

  tmux send-keys -t strava:Zeus.2 'cd ~/Projects/strava/active' C-m
  tmux send-keys -t strava:Zeus.2 'clear' C-m
fi

tmux attach -t strava
